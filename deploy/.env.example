# =============================================================================
# Lago Environment Configuration
# =============================================================================
# Copy this file to .env and configure as needed for your deployment.
#
# Usage:
#   Local:      docker compose --profile local --profile db --profile redis up -d
#   Light:      docker compose --profile light --profile db --profile redis up -d
#   Production: docker compose --profile production --profile db --profile redis up -d

# =============================================================================
# Domain Configuration (Required for light/production profiles)
# =============================================================================
# Your domain name (e.g., lago.example.com)
LAGO_DOMAIN=

# Email for Let's Encrypt SSL certificates
LAGO_ACME_EMAIL=

# =============================================================================
# Version
# =============================================================================
# Lago version to deploy (default: v1.27.1)
# LAGO_VERSION=v1.27.1

# =============================================================================
# Database Configuration
# =============================================================================
# For local PostgreSQL (when using --profile db), these set the local DB config.
# For external PostgreSQL (without --profile db), these connect to your external DB.

POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_USER=lago
POSTGRES_PASSWORD=changeme
POSTGRES_DB=lago
# POSTGRES_SCHEMA=public

# =============================================================================
# Redis Configuration
# =============================================================================
# For local Redis (when using --profile redis), these set the local Redis config.
# For external Redis (without --profile redis), these connect to your external Redis.

REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD=

# Redis cache (can be same as main Redis or separate)
LAGO_REDIS_CACHE_HOST=redis
LAGO_REDIS_CACHE_PORT=6379
# LAGO_REDIS_CACHE_PASSWORD=

# =============================================================================
# Security Keys
# =============================================================================
# IMPORTANT: Generate secure random values for production!
# Generate with: openssl rand -hex 64

SECRET_KEY_BASE=your-secret-key-base-hex-64
LAGO_ENCRYPTION_PRIMARY_KEY=your-encryption-primary-key
LAGO_ENCRYPTION_DETERMINISTIC_KEY=your-encryption-deterministic-key
LAGO_ENCRYPTION_KEY_DERIVATION_SALT=your-encryption-derivation-salt

# RSA Private Key (optional - auto-generated if not set)
# Generate with: openssl genrsa 2048 | openssl base64 -A
# LAGO_RSA_PRIVATE_KEY=

# =============================================================================
# Worker Concurrency
# =============================================================================
# Adjust based on your server resources and load

WORKER_CONCURRENCY=10
BILLING_WORKER_CONCURRENCY=3
PDF_WORKER_CONCURRENCY=3
WEBHOOK_WORKER_CONCURRENCY=5
CLOCK_WORKER_CONCURRENCY=10
EVENTS_WORKER_CONCURRENCY=10

# =============================================================================
# AWS S3 Storage (Optional)
# =============================================================================
LAGO_USE_AWS_S3=false
# LAGO_AWS_S3_ACCESS_KEY_ID=
# LAGO_AWS_S3_SECRET_ACCESS_KEY=
# LAGO_AWS_S3_REGION=us-east-1
# LAGO_AWS_S3_BUCKET=
# LAGO_AWS_S3_ENDPOINT=

# =============================================================================
# Google Cloud Storage (Optional)
# =============================================================================
LAGO_USE_GCS=false
# LAGO_GCS_PROJECT=
# LAGO_GCS_BUCKET=

# =============================================================================
# Email Configuration (Optional)
# =============================================================================
# LAGO_FROM_EMAIL=
# LAGO_SMTP_ADDRESS=
# LAGO_SMTP_PORT=587
# LAGO_SMTP_USERNAME=
# LAGO_SMTP_PASSWORD=

# =============================================================================
# Google OAuth (Optional)
# =============================================================================
# GOOGLE_AUTH_CLIENT_ID=
# GOOGLE_AUTH_CLIENT_SECRET=

# =============================================================================
# Lago Features
# =============================================================================
# Enable Sidekiq Web UI (default: true)
LAGO_SIDEKIQ_WEB=true

# Disable signup (default: false)
LAGO_DISABLE_SIGNUP=false

# Disable analytics (default: false)
# LAGO_DISABLE_SEGMENT=true

# Disable wallet refresh (default: false)
# LAGO_DISABLE_WALLET_REFRESH=true

# =============================================================================
# Auto Organization Creation (Optional)
# =============================================================================
# Automatically create an organization on startup
LAGO_CREATE_ORG=false
# LAGO_ORG_NAME=
# LAGO_ORG_USER_EMAIL=
# LAGO_ORG_USER_PASSWORD=
# LAGO_ORG_API_KEY=

# =============================================================================
# License (Optional)
# =============================================================================
# LAGO_LICENSE=

# =============================================================================
# Local Profile Overrides (only for --profile local)
# =============================================================================
# Override API/Frontend URLs for local development
# LAGO_API_URL=http://localhost:3000
# LAGO_FRONT_URL=http://localhost
# API_PORT=3000
# FRONT_PORT=80
